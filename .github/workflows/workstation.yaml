name: workstation-builds

on: [push,pull_request]

jobs:
  build:

    runs-on: ${{ matrix.os }}
    strategy:
      matrix:
        #os: [windows-latest, ubuntu-latest, macOS-latest]
        os: [ubuntu-20.04, ubuntu-22.04, macos-12, macos-13, macos-14]

    steps:
    - name: Checkout repository
      uses: actions/checkout@v4

    - name: Install Task
      uses: arduino/setup-task@v2
      
    - name: Run Workstation Deployment Minimal Defaults
      run: task workstation:install-packages --yes

    - name: Run Workstation Deployment for Platform Engineering Role
      run: task workstation:install-packages --yes USER_ROLE="devops-role"